# -*- coding: utf-8 -*-


# common definitions
class AXI4Def:
    AXI4_CLOCK = 125000000
    AXI4_TIMEOUT = 3
    AXI4_DELAY = 0.001
    IPCORE_INFO_ADDR = 0x00


class AIDSlaveDef:
    REG_SIZE = 8192
    CONFIG_REGISTER = 0x10
    ENABLE_CMD = 0x01
    DISABLE_CMD = 0x00
    COMMAND_RAM_MAX_SIZE = 32

    REQ_RAM_ADDR_REGISTER = 0x21
    REQ_RAM_DATA_REGISTER = 0x23
    REQ_RAM_REGISTER = 0x20
    REQ_SAVE_CMD = 0x01

    REP_RAM_ADDR_REGISTER = 0x31
    REP_RAM_DATA_REGISTER = 0x33
    REP_RAM_REGISTER = 0x30
    REP_SAVE_CMD = 0x01


class AXI4StreadmDef:
    TXDATA_WIDTH_REGISTER = 0x0C
    RXDATA_WIDTH_REGISTER = 0x0D
    TXBUF_COUNT_REGISTER = 0x10
    RXBUF_COUNT_REGISTER = 0x12
    TXBUF_REGISTER = 0x14
    RXBUF_REGISTER = 0x18
    REG_SIZE = 256


# pl i2c register and cmd definition
class PLI2CDef:
    CONFIG_REGISTER = 0x10
    TX_COUNT_REGISTER = 0x1C
    RX_COUNT_REGISTER = 0x1E
    TX_BUF_REGISTER = 0x14
    RX_BUF_REGISTER = 0x18
    FREQ_REGISTER = 0x20
    BUF_SIZE_REGISTER = 0x12
    RESET_CMD = 0x00
    ENABLE_CMD = 0x01
    SEND_START_CMD = 0x80
    SEND_ACK_CMD = 0x40
    SEND_NACK_STOP_CMD = 0x70
    WAIT_ACK_CMD = 0x00
    WAIT_ACK_STOP_CMD = 0x20
    IS_NACK_FLAG = 0x01
    READ_FLAG = 0x01
    WRITE_FLAG = 0x00
    DUMMY_DATA = 0x00

    REG_SIZE = 256
    DEFAULT_RATE = 400000
    DEFAULT_MAX_RATE = 2000000


# pl spi register and cmd definition
class PLSPIDef:
    # register address
    BASE_CLOCK_FREQ_REGISTER = 0x04
    CONFIG_REGISTER = 0x10
    TRANSMIT_START_REGISTER = 0x11
    FIFO_CLR_REGISTER = 0x12
    CS_REGISTER = 0x13
    STATE_REGISTER = 0x14
    FREQ_REGISTER = 0x20
    BYTE_LEN_REGISTER = 0x24
    CONTROL_REGISTER = 0x26
    TRANSMIT_CNT_REGISTER = 0x30
    RECEIVE_CNT_REGISTER = 0x34
    WDATA_REGISTER = 0x80

    # register enable
    TRANSMIT_ENABLE = 0x01
    MODULE_ENABLE = 0x01

    # spi operation mode
    READ_ENABLE = 0x02
    WRITE_ENABLE = 0x04
    READ_WRITE_ENABLE = 0x06

    # cs mode
    CS_LOW = 0
    CS_HIGH = 1

    # spi work mode
    QPI_MODE = 1
    SPI_MODE = 0

    DEFAULT_SPEED = 1000000
    MIN_SPEED = 2
    MAX_SPEED = 20000000
    CLK_REGISTER_LEN = 3
    SPI_MODE_MASK = 0xCF
    MAX_FIFO_LEN = 512
    STATE_READY = 1
    CLEAR_FIFO = 1
    CONTROL_REGISTER_LEN = 1
    CONFIG_REGISTER_LEN = 1
    FREQ_REGISTER_LEN = 1
    KHZ = 1000
    SPI_READY = 0x01
    BYTE_ALIGNMENT_LENGTH = 4
    INT_TO_LIST_LEN_2 = 2
    INT_TO_LIST_LEN_4 = 4
    DELAY_TIME = 0.000001   # unit us
    CONVERSION_RATE = 1000000
    REG_SIZE = 8192
    SPI_MODE_CLEAR = 0xFE
    SPI_MODE_BIT = 0x01

    # SPI Mode
    SPI_MODES = {
        # CPOL=0, CPHA=0
        "MODE0": 0,
        # CPOL=0, CPHA=1
        "MODE1": 1,
        # CPOL=1, CPHA=0
        "MODE2": 2,
        # CPOL=1, CPHA=1
        "MODE3": 3
    }


# pl uart register and cmd definition
class PLUARTDef:
    CONFIG_REGISTER = 0x10
    TXBUF_SIZE_REGISTER = 0x0C
    RXBUF_COUNT_REGISTER = 0x38
    TXBUF_COUNT_REGISTER = 0x3C
    RX_BUF_REGISTER = 0x30
    TX_BUF_REGISTER = 0x34
    DATABIT_REGISTER = 0x24
    BADURATE_REGISTER = 0x20
    TIMESTAMP_REGISTER = 0x25
    CONFIG_ENABLE_REGISTER = 0x26

    ENABLE_CMD = 0x01
    DISABLE_CMD = 0x00
    PARITY_MASK = 0x03
    PARITY_ODD = 0x01
    PARITY_EVEN = 0x00
    PARITY_NONE = 0x02
    STOPBITS_MASK = 0x0C
    STOPBITS_1BIT = 0x04
    STOPBITS_1_5BIT = 0x08
    STOPBITS_2BIT = 0x0C
    DATABITS_MASK = 0xF0
    CONFIG_ENABLE_CMD = 0x11
    TIMESTAMP_ENABLE_CMD = 0x01
    TIMESTAMP_DISABLE_CMD = 0x00

    REG_SIZE = 256
    DEFAULT_BAUDRATE = 115200
    DEFAULT_TIMESTAMP = False
    DEFAULT_MIN_BAUDRATE = 2400
    DEFAULT_MAX_BAUDRATE = 3000000

    UART_PARITIES = ['even', 'odd', 'none']
    UART_STOPBITS = [1, 1.5, 2]


# pl pwm register and cmd definition
class PLPWMDef:
    CONFIG_REGISTER = 0x10
    SIGNAL_REGISTER = 0x11
    DURATION_REGISTER = 0x40
    FREQUENCY_REGISTER = 0x20
    DUTY_REGISTER = 0x28
    VPP_SCALE_REGISTER = 0x24
    OFFSET_VOLT_REGISTER = 0x2C

    ENABLE_MASK = 0x01
    DISABLE_CMD = 0x00
    ENABLE_CMD = 0x01
    SIGNAL_DISABLE_CMD = 0x00
    SIGNAL_ENABLE_CMD = 0x01
    SIGNAL_MASK = 0xF0
    SIGNAL_TYPE_SQUARE = 0x00

    REG_SIZE = 1024


class PLGPIODef:
    INPUT_REGISTERS = [0x18, 0x28, 0x38, 0x48]
    OUTPUT_REGISTERS = [0x10, 0x20, 0x30, 0x40]
    DIR_REGISTERS = [0x14, 0x24, 0x34, 0x44]

    REG_SIZE = 256

    DIR_INPUT = 'input'
    DIR_OUTPUT = 'output'
